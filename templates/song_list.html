<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Song</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/css/bootstrap.min.css" rel="stylesheet"
          integrity="sha384-EVSTQN3/azprG1Anm3QDgpJLIm9Nao0Yz1ztcQTwFspd3yD65VohhpuuCOmLASjC" crossorigin="anonymous">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.2/dist/js/bootstrap.bundle.min.js"
            integrity="sha384-MrcW6ZMFYlzcLA8Nl+NtUVF0sA7MsXsP1UyJoMp4YLEuNSfAP+JcXn/tWtIaxVXM"
            crossorigin="anonymous"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="../static/js/loadLayout.js"></script>
    <script>
        function load() {
            loadLayoutMenu();
            loadLayoutLogin();
            loadLayoutMainContent();
            loadLayoutMainTaskbar();
            loadLayoutMainAdv();
            loadLayoutFooter();
            hasUserLogin();
            viewUserInfor();
        }
    </script>
    <link rel="stylesheet" href="../static/css/login.css">
    <script src="../static/js/redirect.js"></script>
    <script src="../static/js/song.js"></script>

</head>
<body  onload="loadData();load()">



<div class="container mt-5">
    <div id="layout_menu">

    </div>
    <div id="layout_login"></div>
    <div id="layout_main">
        <div id="content">Content</div>
        <div id="form">
            <button onclick="showFormCreate()">ADD</button>
        </div>
        <div id="div">
            <button onclick="showFormSearch()">Tìm Kiếm</button>
        </div>
        <div id="main"></div>
        <div id="main2"></div>

        <input type="file" id="audio">
        <button onclick="uploadAudio()">Upload audio</button>
        <br>
        <input type="file" id="photo">
        <button onclick="uploadImage()">Upload Image</button>

        <img id="image" src="">

        <div id="layout_footer"></div>
        <div id="sort">
            <button onclick="showSort()">Newest</button>
        </div>

    </div>
</div>
<script src="../static/js/user_list.js"></script>
<script src="../static/js/user_login.js"></script>
<script src="../static/js/user_view_edit.js"></script>
<script src="../static/js/redirect.js"></script>

<!-- The core Firebase JS SDK is always required and must be listed first -->
<script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-storage.js"></script>

<!-- https://firebase.google.com/docs/web/setup#available-libraries -->
<script src="https://www.gstatic.com/firebasejs/8.9.0/firebase-analytics.js"></script>


<script>
    // Your web app's Firebase configuration
    // For Firebase JS SDK v7.20.0 and later, measurementId is optional
    var firebaseConfig = {
        apiKey: "AIzaSyAFa5LCC1hPnuBc5Lpv7YFrxSD59l-jc0E",
        authDomain: "zingmp3-project.firebaseapp.com",
        projectId: "zingmp3-project",
        storageBucket: "zingmp3-project.appspot.com",
        messagingSenderId: "586241566045",
        appId: "1:586241566045:web:ab0014cb015f230821b4b4",
        measurementId: "G-2LCN4JYDE5"
    };
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    firebase.analytics();

    function uploadAudio(){
        const  ref=firebase.storage().ref();
        const file=document.querySelector("#audio").files[0];
        const name=file.name;
        const metadata={
            contentType:file.type
        }
        const task=ref.child(name).put(file,metadata);

        task
            .then(snapshot => snapshot.ref.getDownloadURL())
            .then(url => {
                document.getElementById('main').innerHTML = `<audio controls preload="none"> <source src="${url}"> </audio>`
                document.getElementById('mp3').value = `${url}`
            })
    }
    function uploadImage(){
        const  ref=firebase.storage().ref();
        const file=document.querySelector("#photo").files[0];
        const name=file.name;
        const metadata={
            contentType:file.type
        }
        const task=ref.child(name).put(file,metadata);

        task
            .then(snapshot => snapshot.ref.getDownloadURL())
            .then(url => {
                document.getElementById('main2').innerHTML = `<img src="${url}" alt="" height="50px" width="50px"> </<img>`
                document.getElementById('img').value = `${url}`
            })
    }
</script>
</body>
</html>
